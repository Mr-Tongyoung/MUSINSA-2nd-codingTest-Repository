# 요구사항 분석 및 설계 결정

## 1. 기획팀 요청사항 분석

### 1.1 명시된 요구사항

| 구분 | 요구사항 |
|------|----------|
| 기능 | 학생 목록 조회, 강좌 목록 조회(전체/학과별), 교수 목록 조회 |
| 기능 | 수강신청, 수강취소, 내 시간표(이번 학기) 조회 |
| 제약 | 학생당 최대 18학점 |
| 제약 | 동일 시간대 중복 수강 불가 |
| 핵심 | 정원 초과 절대 방지 (동시성 제어) |
| 범위 | 서버(백엔드)만 구현, 프론트엔드 제외 |

### 1.2 도출된 암묵적 요구사항

| 구분 | 결정 사항 | 근거 |
|------|-----------|------|
| 동일 강좌 중복 신청 | 불가 | 같은 강좌를 두 번 신청하는 것은 비합리적 |
| 인증/인가 | 미구현 (학생 ID 기반) | 핵심 기능 우선, 프론트팀 연동 전 단계 |
| 수강취소 기한 | 제한 없음 | 명시되지 않았으므로 자유롭게 취소 가능 |
| 재수강 | 허용하지 않음 | 이번 학기 수강신청만 다루므로 재수강 개념 불필요 |
| 선수과목/학년 제한 | 미구현 | 핵심 기능 우선 구현 후 확장 가능 |

---

## 2. 설계 결정

### 2.1 데이터베이스 선택: H2 인메모리

- **근거**: 별도 DB 설치 없이 실행 가능, 빠른 데이터 초기화, 평가자 편의성
- **트레이드오프**: 서버 재시작 시 데이터 초기화 (과제 특성상 문제 없음)

### 2.2 동시성 제어 전략: 비관적 락 (Pessimistic Lock)

- **근거**: 수강신청은 경합이 높은 시나리오(정원 1명 남은 강좌에 100명 동시 신청)
- **구현**: JPA의 `@Lock(PESSIMISTIC_WRITE)`를 활용한 행 수준 락
- **트레이드오프**: 낙관적 락 대비 성능은 낮으나, 정원 초과 방지의 확실성이 높음
- **대안 검토**: 낙관적 락은 재시도 로직이 필요하고, 높은 경합 상황에서 다수의 재시도 발생 가능

### 2.3 시간표 슬롯 정의

| 항목 | 설계 |
|------|------|
| 요일 | 월, 화, 수, 목, 금 (주 5일) |
| 시간 범위 | 09:00 ~ 18:00 |
| 시간 단위 | 30분 단위 슬롯 |
| 표현 방식 | "월 09:00-10:30" 형식 |

### 2.4 학점 설계

| 항목 | 설계 |
|------|------|
| 학점 범위 | 1 ~ 4학점 |
| 최대 신청 학점 | 18학점 |
| 학점 분포 | 3학점 강좌가 가장 많도록 가중치 적용 |

### 2.5 시간 충돌 판단

- 두 강좌의 요일이 겹치고, 시간 구간이 겹치면 충돌로 판단
- 예: "월 09:00-10:30"과 "월 10:00-11:30"은 충돌
- 예: "월 09:00-10:30"과 "월 10:30-12:00"은 충돌하지 않음 (경계 허용)

---

## 3. API 설계 원칙

- RESTful 리소스 중심 설계
- 일관된 에러 응답 형식: `{ "error": "에러 메시지", "code": "ERROR_CODE" }`
- 적절한 HTTP 상태 코드 사용
- 목록 조회 시 페이지네이션 지원

---

## 4. 데이터 생성 전략

- 서버 시작 시 `ApplicationRunner`를 통해 초기 데이터 동적 생성
- 한국식 이름, 학과명, 강좌명을 토큰 조합으로 생성
- 강좌 시간표는 겹치지 않도록 슬롯 기반으로 배정
- 1분 이내 완료를 위해 배치 삽입 활용
